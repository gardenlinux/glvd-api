= Garden Linux Vulnerability Database Rest API
Garden Linux Authors;
:doctype: book
:icons: font
:source-highlighter: highlightjs
:toc:

== API Endpoints

This document describes the HTTP API endpoints of Garden Linux Vulnerability Database.

CAUTION: This document and the API are work in progress and subject to change at any time.

CAUTION: This document uses `glvd.gardenlinux.io` as the hostname in samples. This does not work currently. When running locally, replace it with `localhost:8080`, or with the real hostname of your demo system.

=== Check running app

For verifying that the app is running and has a connection to the database, you may query the `readiness` endpoint:

include::{snippets}/readiness/curl-request.adoc[]

The expected response looks like this:

include::{snippets}/readiness/http-response.adoc[]

If this worked, your GLVD api is deployed and it has access to the configured database management system.

=== Get a CVE by id

To query a single CVE by its id, you maye use the `cves` endpoint:

include::{snippets}/getCve/curl-request.adoc[]

The expected response looks like this:

include::{snippets}/getCve/http-response.adoc[]

The `data` field contains a full copy of the CVE as provided by https://nvd.nist.gov[NIST NVD].

=== Get a list of CVEs by distro

To query all CVEs for a given distribution by version, you may use this endpoint:

include::{snippets}/getCveForDistro/curl-request.adoc[]

TIP: Acceptable distributions here are `gardenlinux` and `debian`.

The expected response looks like this:

include::{snippets}/getCveForDistro/http-response.adoc[]

=== Get a list of CVEs for packages by distro

This endpoint will give you all the CVE for a list of packages in a specified distro.
Note that the package names are comma separated (this might be changed later).
You may or may not need to url-encode the commas.

include::{snippets}/getCveForPackages/curl-request.adoc[]

The expected response looks like this:

include::{snippets}/getCveForPackages/http-response.adoc[]

To use a specific distribution version number, use this endpoint:

include::{snippets}/getCveForPackagesByDistroVersion/curl-request.adoc[]

The expected response looks like this:

include::{snippets}/getCveForPackagesByDistroVersion/http-response.adoc[]

=== Get List of Packages

Just gives you a list of packages in a given distribution.

include::{snippets}/getPackages/curl-request.adoc[]

The expected response looks like this:

include::{snippets}/getPackages/http-response.adoc[]

=== Get Package With Vulnerabilities

Gives you a list of vulnerabilities for a specific package.

include::{snippets}/getPackageWithVulnerabilities/curl-request.adoc[]

The expected response looks like this:

include::{snippets}/getPackageWithVulnerabilities/http-response.adoc[]

=== Get Packages By Vulnerabilities

Give a list of affected packages by vulnerability

include::{snippets}/getPackagesByVulnerability/curl-request.adoc[]

The expected response looks like this:

include::{snippets}/getPackagesByVulnerability/http-response.adoc[]
